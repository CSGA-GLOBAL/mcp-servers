<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Dashboard - CSGA Global</title>
 <meta name="description" content="CSGA Global Dashboard - Manage your AI governance and cybersecurity operations.">
 
 <style>
:root {
    --gold: #CC0000;
    --gold-light: #E63946;
    --gold-dark: #A30000;
    --gold-glow: rgba(204, 0, 0, 0.3);
  }
/* ============================================================================
 SCROLL REVEAL ANIMATIONS
 ============================================================================ */
/* Stagger children */
/* Smooth scroll */

/* Section title styling consistent */
/* Consistent section padding */
section, .section {
 padding: 72px 32px;
}
/* Better responsive */
@media (max-width: 1024px) {
 .home-showcase-grid,
 .home-pricing-grid,
 .home-blog-grid { grid-template-columns: repeat(2, 1fr); }
 .home-mcps-grid { grid-template-columns: repeat(3, 1fr); }
 .home-sectors-grid { grid-template-columns: repeat(3, 1fr); }
 .home-trust-content { grid-template-columns: 1fr; }
 .home-stats-bar { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 768px) {
 .home-hero h1 { font-size: 2.5rem; }
 .home-showcase-grid,
 .home-pricing-grid,
 .home-blog-grid { grid-template-columns: 1fr; }
 .home-mcps-grid { grid-template-columns: repeat(2, 1fr); }
 .home-sectors-grid { grid-template-columns: repeat(2, 1fr); }
 .home-stats-bar { grid-template-columns: 1fr; }
 section, .section { padding: 48px 20px; }
}

</style>
 <style>
/* Dashboard page - minimal overrides */
 body { background: #f1f5f9; }
</style>
 <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large">
 <link rel="canonical" href="https://csga-global.vercel.app/dashboard">
 <link rel="icon" type="image/svg+xml" href="/favicon.svg">
 <meta property="og:type" content="website">
 <meta property="og:title" content="Dashboard - CSGA Global">
 <meta property="og:description" content="CSGA Global Dashboard - Manage your AI governance and cybersecurity operations.">
 <meta property="og:url" content="https://csga-global.vercel.app/dashboard">
 <meta property="og:image" content="https://csga-global.vercel.app/og-image.png">
 <meta property="og:site_name" content="CSGA Global">
 <meta name="twitter:card" content="summary_large_image">
 <meta name="twitter:title" content="Dashboard - CSGA Global">
 <meta name="twitter:description" content="CSGA Global Dashboard - Manage your AI governance and cybersecurity operations.">
 <meta name="twitter:image" content="https://csga-global.vercel.app/og-image.png">
 <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","name":"Dashboard - CSGA Global","description":"CSGA Global Dashboard - Manage your AI governance and cybersecurity operations.","url":"https://csga-global.vercel.app/dashboard","isPartOf":{"@type":"WebSite","name":"CSGA Global","url":"https://csga-global.vercel.app"},"publisher":{"@type":"Organization","name":"CSGA Global"},"speakable":{"@type":"SpeakableSpecification","cssSelector":["h1",".hero-title",".page-intro"]}}</script>
<link rel="stylesheet" href="./components/shared.css">
</head>
<body>
<div id="site-header"></div>

<!-- Load pricing config -->
<script src="/js/pricing-config.js"></script>

<style>
/* â”€â”€ Dashboard-Specific Styles â”€â”€ */
.dash-hero { background:linear-gradient(135deg,#0A1628 0%,#0058A4 100%); padding:48px 24px 36px; color:#fff; text-align:center; }
.dash-hero h1 { font-family:'Space Grotesk',sans-serif; font-size:2.4rem; font-weight:800; margin-bottom:8px; }
.dash-hero p { color:rgba(255,255,255,0.8); font-size:1.05rem; max-width:600px; margin:0 auto 24px; }
.dash-auth-bar { display:flex; gap:12px; justify-content:center; flex-wrap:wrap; align-items:center; }
.dash-auth-bar .user-avatar { width:36px; height:36px; background:#CC0000; color:#fff; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:700; font-size:0.95rem; }
.dash-content { max-width:1400px; margin:0 auto; padding:36px 24px; }
.dash-card { background:#fff; border-radius:12px; padding:28px; box-shadow:0 2px 8px rgba(0,0,0,0.06); }
.dash-stat { border-left:4px solid; padding:24px; }
.dash-stat-label { font-size:0.8rem; color:#64748B; font-weight:600; text-transform:uppercase; letter-spacing:1px; margin-bottom:8px; }
.dash-stat-value { font-size:2rem; font-weight:800; color:#0A1628; font-family:'Space Grotesk',sans-serif; }
.dash-stat-sub { font-size:0.82rem; font-weight:600; margin-top:4px; }
/* Usage meter */
.usage-meter { margin:16px 0 8px; }
.usage-bar-track { width:100%; height:12px; background:#E2E8F0; border-radius:6px; overflow:hidden; }
.usage-bar-fill { height:100%; border-radius:6px; transition:width 0.8s ease; }
.usage-label { display:flex; justify-content:space-between; font-size:0.78rem; color:#64748B; margin-top:6px; }
/* Subscription card */
.sub-card { background:linear-gradient(135deg,#0A1628,#0058A4); border-radius:12px; padding:28px; color:#fff; }
.sub-tier-badge { display:inline-block; padding:4px 14px; border-radius:20px; font-size:0.75rem; font-weight:700; text-transform:uppercase; letter-spacing:0.5px; margin-bottom:8px; }
.sub-plan-name { font-size:1.8rem; font-weight:800; font-family:'Space Grotesk',sans-serif; margin:4px 0; }
.sub-plan-desc { font-size:0.85rem; color:rgba(255,255,255,0.7); margin:8px 0 16px; }
.sub-actions { display:flex; gap:10px; flex-wrap:wrap; }
.btn-dash { padding:10px 24px; border-radius:8px; font-weight:700; font-size:0.88rem; text-decoration:none; transition:all .3s; cursor:pointer; border:none; display:inline-block; }
.btn-upgrade { background:#CC0000; color:#fff; }
.btn-upgrade:hover { background:#E63946; transform:translateY(-1px); }
.btn-billing { background:rgba(255,255,255,0.15); color:#fff; border:1px solid rgba(255,255,255,0.3); }
.btn-billing:hover { background:rgba(255,255,255,0.25); }
/* MCP grid */
.mcp-item { padding:12px 14px; background:#f8fafc; border-radius:8px; display:flex; align-items:center; justify-content:space-between; gap:8px; transition:all .15s; }
.mcp-item:hover { background:#DBEAFE; }
.mcp-dot { width:6px; height:6px; border-radius:50%; flex-shrink:0; }
.mcp-name { font-size:0.82rem; font-weight:500; color:#0A1628; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.mcp-badge { font-size:0.65rem; font-weight:700; padding:2px 8px; border-radius:4px; flex-shrink:0; letter-spacing:0.3px; }
/* Quick action link */
.qa-link { display:flex; align-items:center; gap:12px; padding:12px 16px; background:#f8fafc; border-radius:8px; text-decoration:none; color:#0A1628; transition:all .2s; font-weight:500; font-size:0.9rem; }
.qa-link:hover { background:#DBEAFE; }
.qa-icon { width:32px; height:32px; border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:0.85rem; flex-shrink:0; color:#fff; }
/* Trial banner */
.trial-banner { background:linear-gradient(90deg,#F59E0B,#D97706); color:#fff; padding:12px 20px; border-radius:10px; display:none; margin-bottom:20px; font-size:0.9rem; font-weight:600; text-align:center; }
/* Overage alert */
.overage-alert { background:#FEF2F2; border:1px solid #FECACA; color:#991B1B; padding:14px 20px; border-radius:10px; display:none; margin-bottom:20px; font-size:0.88rem; }
/* Credit pack CTA */
.credit-cta { display:flex; gap:10px; margin-top:12px; flex-wrap:wrap; }
.credit-btn { padding:8px 16px; border-radius:6px; font-size:0.78rem; font-weight:700; text-decoration:none; cursor:pointer; border:none; transition:all .2s; }
/* Activity dot */
.act-dot { width:8px; height:8px; border-radius:50%; margin-top:6px; flex-shrink:0; }
/* Login modal */
.login-overlay { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); z-index:2000; align-items:center; justify-content:center; }
.login-box { background:#fff; border-radius:16px; padding:48px; max-width:420px; width:90%; position:relative; box-shadow:0 24px 48px rgba(0,0,0,0.2); }
.login-close { position:absolute; top:16px; right:16px; background:none; border:none; font-size:1.5rem; cursor:pointer; color:#94a3b8; }
.login-input { width:100%; padding:14px 16px; border:2px solid #e2e8f0; border-radius:10px; font-size:0.95rem; margin-bottom:12px; box-sizing:border-box; outline:none; transition:border .2s; }
.login-input:focus { border-color:#0058A4; }
.login-submit { width:100%; padding:14px; background:#0058A4; color:#fff; border:none; border-radius:10px; font-weight:700; font-size:1rem; cursor:pointer; transition:all .3s; }
.login-submit:hover { background:#004A8C; }
/* Success toast */
.toast { position:fixed; top:100px; right:24px; background:#10B981; color:#fff; padding:16px 24px; border-radius:10px; font-weight:600; font-size:0.9rem; z-index:3000; transform:translateX(400px); transition:transform .4s ease; box-shadow:0 8px 24px rgba(0,0,0,0.15); }
.toast.show { transform:translateX(0); }
</style>

<!-- Dashboard Hero -->
<section class="dash-hero">
 <h1>Operations Dashboard</h1>
 <p>AI governance and cybersecurity operations â€” unified interface</p>
 <div class="dash-auth-bar" id="authBar">
  <button onclick="showLogin()" class="btn-dash btn-upgrade">Sign In</button>
  <a href="/members.html" class="btn-dash btn-billing">Create Account</a>
 </div>
</section>

<!-- Login Modal -->
<div class="login-overlay" id="loginModal">
 <div class="login-box">
  <button class="login-close" onclick="closeLogin()">&times;</button>
  <h2 style="font-family:'Space Grotesk',sans-serif;color:#0A1628;font-size:1.6rem;margin-bottom:8px;">Welcome Back</h2>
  <p style="color:#64748B;font-size:0.9rem;margin-bottom:24px;">Sign in to your CSGA Global account</p>
  <div id="loginForm">
   <input id="loginEmail" type="email" placeholder="Email address" class="login-input">
   <input id="loginPass" type="password" placeholder="Password" class="login-input" style="margin-bottom:16px;">
   <button onclick="doLogin()" class="login-submit">Sign In</button>
   <p id="loginError" style="color:#CC0000;font-size:0.85rem;margin-top:12px;display:none;text-align:center;"></p>
  </div>
  <div style="margin-top:16px;text-align:center;">
   <p style="color:#94a3b8;font-size:0.82rem;">Demo: use any email &amp; password to explore</p>
  </div>
 </div>
</div>

<!-- Toast notification -->
<div class="toast" id="toast"></div>

<!-- Dashboard Content -->
<section class="dash-content" id="dashContent">

 <!-- Trial Banner (shown when on trial) -->
 <div class="trial-banner" id="trialBanner">
  <span id="trialText">Your free trial ends in 12 days.</span>
  <a href="/pricing.html" style="color:#fff;text-decoration:underline;margin-left:8px;">Add payment method</a>
 </div>

 <!-- Overage Alert (shown when over limit) -->
 <div class="overage-alert" id="overageAlert">
  <strong>Usage Alert:</strong> <span id="overageText">You have exceeded your included credits.</span>
  <a href="#" onclick="buyCredits('pro');return false;" style="color:#991B1B;font-weight:700;margin-left:6px;">Buy Credit Pack</a>
 </div>

 <!-- Stats Row -->
 <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:36px;">
  <div class="dash-card dash-stat" style="border-color:#0058A4;">
   <div class="dash-stat-label">Your Plan</div>
   <div class="dash-stat-value" id="statPlan">Community</div>
   <div class="dash-stat-sub" id="statPlanSub" style="color:#0058A4;">Free Tier</div>
  </div>
  <div class="dash-card dash-stat" style="border-color:#10B981;">
   <div class="dash-stat-label">Credits Used</div>
   <div class="dash-stat-value" id="statCreditsUsed">0</div>
   <div class="dash-stat-sub" style="color:#10B981;" id="statCreditsTotal">of 100</div>
  </div>
  <div class="dash-card dash-stat" style="border-color:#CC0000;">
   <div class="dash-stat-label">MCP Access</div>
   <div class="dash-stat-value" id="statMcpCount">3</div>
   <div class="dash-stat-sub" id="statMcpSub" style="color:#CC0000;">Servers available</div>
  </div>
  <div class="dash-card dash-stat" style="border-color:#A855F7;">
   <div class="dash-stat-label">Period Ends</div>
   <div class="dash-stat-value" id="statPeriod" style="font-size:1.3rem;">â€”</div>
   <div class="dash-stat-sub" id="statPeriodSub" style="color:#A855F7;">Current billing cycle</div>
  </div>
 </div>

 <!-- Main Grid: 2 cols -->
 <div style="display:grid;grid-template-columns:2fr 1fr;gap:24px;margin-bottom:36px;">

  <!-- Left: Usage + MCP Grid -->
  <div style="display:flex;flex-direction:column;gap:24px;">

   <!-- Usage Card -->
   <div class="dash-card">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;">
     <h3 style="font-family:'Space Grotesk',sans-serif;font-size:1.15rem;color:#0A1628;margin:0;">API Credit Usage</h3>
     <span style="font-size:0.78rem;color:#64748B;font-weight:500;" id="usagePeriodLabel">This billing period</span>
    </div>
    <div class="usage-meter">
     <div class="usage-bar-track">
      <div class="usage-bar-fill" id="usageBar" style="width:0%;background:linear-gradient(90deg,#10B981,#059669);"></div>
     </div>
     <div class="usage-label">
      <span id="usageLabelUsed">0 used</span>
      <span id="usageLabelRemaining">100 remaining</span>
     </div>
    </div>
    <div id="overageInfo" style="display:none;margin-top:12px;padding:12px 16px;background:#FEF2F2;border-radius:8px;">
     <div style="font-size:0.85rem;color:#991B1B;font-weight:600;">Overage: <span id="overageCount">0</span> calls over limit</div>
     <div style="font-size:0.82rem;color:#B91C1C;margin-top:4px;">Estimated overage cost: <strong id="overageCost">$0.00</strong> at <span id="overageRate">$0.00</span>/1,000 calls</div>
    </div>
    <div class="credit-cta" id="creditCta">
     <button onclick="buyCredits('starter')" class="credit-btn" style="background:#DBEAFE;color:#0058A4;">+1K Credits â€” $9</button>
     <button onclick="buyCredits('pro')" class="credit-btn" style="background:#D1FAE5;color:#065F46;">+5K Credits â€” $29</button>
     <button onclick="buyCredits('enterprise')" class="credit-btn" style="background:#F3E8FF;color:#7C3AED;">+25K Credits â€” $99</button>
    </div>
   </div>

   <!-- MCP Server Grid -->
   <div class="dash-card">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
     <h3 style="font-family:'Space Grotesk',sans-serif;font-size:1.15rem;color:#0A1628;margin:0;">Your MCP Servers</h3>
     <span style="font-size:0.78rem;font-weight:600;padding:4px 12px;border-radius:20px;" id="mcpStatusBadge">Loading...</span>
    </div>
    <div id="mcpGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:10px;max-height:420px;overflow-y:auto;"></div>
    <div style="margin-top:16px;text-align:center;">
     <a href="/catalog.html" style="color:#0058A4;font-weight:600;font-size:0.88rem;text-decoration:none;">View full catalog (70 MCPs) â†’</a>
    </div>
   </div>
  </div>

  <!-- Right Sidebar -->
  <div style="display:flex;flex-direction:column;gap:20px;">

   <!-- Subscription Card -->
   <div class="sub-card" id="subCard">
    <div class="sub-tier-badge" id="subBadge" style="background:rgba(16,185,129,0.2);color:#6EE7B7;">COMMUNITY</div>
    <div class="sub-plan-name" id="subPlanName">Community</div>
    <div class="sub-plan-desc" id="subPlanDesc">3 Core MCPs, 100 credits/month</div>
    <div id="subPriceDisplay" style="font-size:1.4rem;font-weight:800;color:#CC0000;margin-bottom:12px;">Free</div>
    <div id="subFeatures" style="margin-bottom:16px;"></div>
    <div class="sub-actions">
     <a href="/pricing.html" class="btn-dash btn-upgrade" id="btnUpgrade">Upgrade Plan</a>
     <button class="btn-dash btn-billing" id="btnBilling" onclick="openBillingPortal()" style="display:none;">Manage Billing</button>
    </div>
   </div>

   <!-- Smart Upsell Card (shows for Community/Starter) -->
   <div class="dash-card" id="upsellCard" style="display:none;background:linear-gradient(135deg,#eff6ff,#f0f9ff);border:1px solid #bae6fd;">
    <div style="display:flex;align-items:center;gap:8px;margin-bottom:10px;">
     <span style="font-size:1.2rem;">ğŸ’¡</span>
     <h3 style="font-family:'Space Grotesk',sans-serif;font-size:1rem;color:#0058A4;margin:0;" id="upsellTitle">Unlock More MCPs</h3>
    </div>
    <p style="font-size:.85rem;color:#475569;line-height:1.55;margin-bottom:14px;" id="upsellDesc">You're using 3 of 70 available MCPs. Upgrade to Starter for 5 MCPs and 2,500 credits/month.</p>
    <div style="background:#fff;border-radius:8px;padding:10px 14px;margin-bottom:14px;display:flex;align-items:center;justify-content:space-between;">
     <span style="font-size:.82rem;color:#64748B;">Current plan value</span>
     <div style="display:flex;align-items:center;gap:8px;">
      <span style="font-size:.82rem;color:#94a3b8;text-decoration:line-through;" id="upsellOldPrice">$0</span>
      <span style="font-size:1rem;font-weight:700;color:#CC0000;" id="upsellNewPrice">â†’ $79/mo</span>
     </div>
    </div>
    <a href="/pricing.html" class="btn-dash btn-upgrade" style="display:block;text-align:center;font-size:.88rem;" id="upsellBtn">See Upgrade Options â†’</a>
   </div>

   <!-- Quick Actions -->
   <div class="dash-card">
    <h3 style="font-family:'Space Grotesk',sans-serif;font-size:1.15rem;color:#0A1628;margin:0 0 16px;">Quick Actions</h3>
    <div style="display:flex;flex-direction:column;gap:10px;">
     <a href="/catalog.html" class="qa-link">
      <span class="qa-icon" style="background:#0058A4;">âš¡</span> Browse MCP Catalog
     </a>
     <a href="/training.html" class="qa-link">
      <span class="qa-icon" style="background:#10B981;">ğŸ“š</span> Start a Course
     </a>
     <a href="/pricing.html" class="qa-link">
      <span class="qa-icon" style="background:#A855F7;">ğŸ’</span> Compare Plans
     </a>
     <a href="/ai-governance.html" class="qa-link">
      <span class="qa-icon" style="background:#CC0000;">ğŸ›¡ï¸</span> AI Governance
     </a>
     <a href="/contact.html" class="qa-link" id="qaSupport" style="display:none;">
      <span class="qa-icon" style="background:#D97706;">ğŸ’¬</span> Contact Support
     </a>
    </div>
   </div>

   <!-- Team Members (paid tiers only) -->
   <div class="dash-card" id="teamCard" style="display:none;">
    <h3 style="font-family:'Space Grotesk',sans-serif;font-size:1.15rem;color:#0A1628;margin:0 0 12px;">Team</h3>
    <div id="teamInfo" style="font-size:0.88rem;color:#64748B;"></div>
   </div>

   <!-- Referral Card -->
   <div class="dash-card" id="referralCard" style="background:linear-gradient(135deg,#fdf4ff,#faf5ff);border:1px solid #e9d5ff;">
    <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px;">
     <span style="font-size:1.1rem;">ğŸ</span>
     <h3 style="font-family:'Space Grotesk',sans-serif;font-size:1rem;color:#7C3AED;margin:0;">Refer & Earn Credits</h3>
    </div>
    <p style="font-size:.83rem;color:#64748B;line-height:1.5;margin-bottom:12px;">Refer a colleague and both get 500 bonus API credits when they subscribe to any paid plan.</p>
    <button onclick="copyReferralLink()" class="btn-dash" style="width:100%;text-align:center;font-size:.85rem;background:#7C3AED;color:#fff;border:none;padding:10px;border-radius:8px;cursor:pointer;font-weight:600;">Copy Referral Link</button>
    <div id="referralCopied" style="display:none;text-align:center;font-size:.78rem;color:#10B981;margin-top:6px;font-weight:600;">âœ“ Copied to clipboard!</div>
   </div>
  </div>
 </div>

 <!-- Compliance & Recent Activity Row -->
 <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;margin-bottom:36px;">
  <!-- Compliance Score -->
  <div class="dash-card">
   <h3 style="font-family:'Space Grotesk',sans-serif;font-size:1.15rem;color:#0A1628;margin:0 0 20px;">Compliance Overview</h3>
   <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;">
    <div style="text-align:center;padding:20px;background:#f0fdf4;border-radius:10px;">
     <div style="font-size:2rem;font-weight:800;color:#10B981;font-family:'Space Grotesk',sans-serif;">92%</div>
     <div style="font-size:0.8rem;color:#64748B;font-weight:600;margin-top:4px;">ISO 42001</div>
    </div>
    <div style="text-align:center;padding:20px;background:#eff6ff;border-radius:10px;">
     <div style="font-size:2rem;font-weight:800;color:#0058A4;font-family:'Space Grotesk',sans-serif;">88%</div>
     <div style="font-size:0.8rem;color:#64748B;font-weight:600;margin-top:4px;">NIST AI RMF</div>
    </div>
    <div style="text-align:center;padding:20px;background:#fdf4e7;border-radius:10px;">
     <div style="font-size:2rem;font-weight:800;color:#CC0000;font-family:'Space Grotesk',sans-serif;">95%</div>
     <div style="font-size:0.8rem;color:#64748B;font-weight:600;margin-top:4px;">EU AI Act</div>
    </div>
    <div style="text-align:center;padding:20px;background:#fef2f2;border-radius:10px;">
     <div style="font-size:2rem;font-weight:800;color:#CC0000;font-family:'Space Grotesk',sans-serif;">85%</div>
     <div style="font-size:0.8rem;color:#64748B;font-weight:600;margin-top:4px;">CASA-CA30</div>
    </div>
   </div>
  </div>

  <!-- Recent Activity -->
  <div class="dash-card">
   <h3 style="font-family:'Space Grotesk',sans-serif;font-size:1.15rem;color:#0A1628;margin:0 0 20px;">Recent Activity</h3>
   <div style="display:flex;flex-direction:column;gap:14px;" id="activityFeed">
    <div style="display:flex;gap:12px;align-items:flex-start;">
     <div class="act-dot" style="background:#10B981;"></div>
     <div><div style="font-size:0.88rem;color:#0A1628;font-weight:500;">AI Governance MCP updated to v1.0.1</div><div style="font-size:0.78rem;color:#94a3b8;">2 hours ago</div></div>
    </div>
    <div style="display:flex;gap:12px;align-items:flex-start;">
     <div class="act-dot" style="background:#0058A4;"></div>
     <div><div style="font-size:0.88rem;color:#0A1628;font-weight:500;">New standard published: CASA-CA30 v2.1</div><div style="font-size:0.78rem;color:#94a3b8;">5 hours ago</div></div>
    </div>
    <div style="display:flex;gap:12px;align-items:flex-start;">
     <div class="act-dot" style="background:#CC0000;"></div>
     <div><div style="font-size:0.88rem;color:#0A1628;font-weight:500;">ISO 42001 compliance score improved</div><div style="font-size:0.78rem;color:#94a3b8;">1 day ago</div></div>
    </div>
    <div style="display:flex;gap:12px;align-items:flex-start;">
     <div class="act-dot" style="background:#CC0000;"></div>
     <div><div style="font-size:0.88rem;color:#0A1628;font-weight:500;">Threat briefing: Q1 2026 report available</div><div style="font-size:0.78rem;color:#94a3b8;">2 days ago</div></div>
    </div>
    <div style="display:flex;gap:12px;align-items:flex-start;">
     <div class="act-dot" style="background:#10B981;"></div>
     <div><div style="font-size:0.88rem;color:#0A1628;font-weight:500;">70 MCP servers verified â€” all passing</div><div style="font-size:0.78rem;color:#94a3b8;">3 days ago</div></div>
    </div>
   </div>
  </div>
 </div>

</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     DASHBOARD SCRIPTS â€” Stripe Integration + CSGA_PRICING
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
(function() {
  'use strict';

  // â”€â”€ State â”€â”€
  const state = {
    loggedIn: false,
    email: null,
    customerId: null, // Stripe customer ID
    tier: 'community',
    usage: null,
    subscription: null,
  };

  // â”€â”€ LVP/MVP/HVP Colors â”€â”€
  const classColors = {
    lvp: { bg: 'rgba(34,197,94,0.1)', text: '#16A34A', label: 'LVP' },
    mvp: { bg: 'rgba(59,130,246,0.1)', text: '#2563EB', label: 'MVP' },
    hvp: { bg: 'rgba(168,85,247,0.1)', text: '#9333EA', label: 'HVP' },
  };

  // â”€â”€ Tier badge colors â”€â”€
  const tierBadgeColors = {
    community:         { bg: 'rgba(16,185,129,0.2)', text: '#6EE7B7' },
    starter:           { bg: 'rgba(59,130,246,0.2)', text: '#93C5FD' },
    professional:      { bg: 'rgba(168,85,247,0.2)', text: '#C4B5FD' },
    enterprise_sector: { bg: 'rgba(204,0,0,0.2)', text: '#FCA5A5' },
    enterprise_full:   { bg: 'rgba(204,0,0,0.3)', text: '#FCA5A5' },
    enterprise_custom: { bg: 'rgba(204,0,0,0.4)', text: '#FDE68A' },
  };

  // â”€â”€ DOM refs â”€â”€
  const $ = id => document.getElementById(id);

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  INIT â€” Check session on load
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  async function init() {
    // Check for ?session_id= from Stripe checkout redirect
    const params = new URLSearchParams(window.location.search);
    const sessionId = params.get('session_id');

    if (sessionId) {
      // Clean URL immediately (prevents re-verification on refresh)
      window.history.replaceState({}, '', '/dashboard');

      // Verify the checkout session with Stripe via our API
      try {
        showToast('Verifying your subscription...');
        const verifyRes = await fetch('/api/verify-session', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ sessionId }),
        });

        if (verifyRes.ok) {
          const data = await verifyRes.json();
          // Set state from real Stripe data
          state.loggedIn = true;
          state.email = data.email;
          state.customerId = data.customerId;
          state.tier = data.tier || 'community';
          state.subscription = data.subscription || null;

          // Persist to localStorage
          localStorage.setItem('csga_session', JSON.stringify({
            email: data.email,
            customerId: data.customerId,
            tier: data.tier,
            mcpAccess: data.mcpAccess,
            bonusCredits: data.bonusCredits,
            casaLevel: data.casaLevel,
            status: data.status,
          }));

          renderLoggedIn();
          fetchUsage();

          const tierLabel = (data.tier || 'community').replace(/_/g, ' ').replace(/\b\w/g, c => c.toUpperCase());
          showToast(`Welcome! Your ${tierLabel} subscription is now active.`);
          renderMcpGrid();
          return;
        } else {
          console.warn('Session verification failed, falling back to localStorage');
          showToast('Payment received â€” please sign in to access your dashboard.');
        }
      } catch (err) {
        console.error('Verify session error:', err);
        showToast('Payment received â€” please sign in to access your dashboard.');
      }
    }

    // Check localStorage for existing session
    const saved = localStorage.getItem('csga_session');
    if (saved) {
      try {
        const session = JSON.parse(saved);
        state.loggedIn = true;
        state.email = session.email;
        state.customerId = session.customerId;
        state.tier = session.tier || 'community';
        renderLoggedIn();
        fetchUsage();
      } catch(e) {
        renderLoggedOut();
      }
    } else {
      renderLoggedOut();
    }

    renderMcpGrid();
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  AUTH â€” Login / Logout
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  window.showLogin = function() { $('loginModal').style.display = 'flex'; };
  window.closeLogin = function() { $('loginModal').style.display = 'none'; };

  window.doLogin = async function() {
    const email = $('loginEmail').value.trim();
    const pass = $('loginPass').value;
    if (!email || !pass) {
      const err = $('loginError');
      err.textContent = 'Please enter email and password';
      err.style.display = 'block';
      return;
    }

    closeLogin();

    // Try to look up real Stripe customer by email via /api/auth
    try {
      const authRes = await fetch('/api/auth', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email, password: pass }),
      });

      if (authRes.ok) {
        const data = await authRes.json();
        state.loggedIn = true;
        state.email = data.email || email;
        state.customerId = data.customerId;
        state.tier = data.tier || 'community';

        localStorage.setItem('csga_session', JSON.stringify({
          email: state.email,
          customerId: data.customerId,
          tier: data.tier || 'community',
          mcpAccess: data.mcpAccess || '[]',
          bonusCredits: data.bonusCredits || 0,
          casaLevel: data.casaLevel || null,
          status: data.status || 'active',
        }));

        renderLoggedIn();
        fetchUsage();
        showToast('Welcome back, ' + email.split('@')[0] + '!');
        return;
      }
    } catch (err) {
      console.log('Auth API not available, using email-based lookup');
    }

    // Fallback: community tier with email-based customer ID
    // This allows the dashboard to function before /api/auth is deployed
    const customerId = 'cus_demo_' + btoa(email).slice(0, 12);
    state.loggedIn = true;
    state.email = email;
    state.customerId = customerId;
    state.tier = 'community';

    localStorage.setItem('csga_session', JSON.stringify({
      email, customerId, tier: 'community'
    }));

    renderLoggedIn();
    fetchUsage();
    showToast('Welcome back, ' + email.split('@')[0] + '!');
  };

  window.doLogout = function() {
    state.loggedIn = false;
    state.email = null;
    state.customerId = null;
    state.tier = 'community';
    state.usage = null;
    localStorage.removeItem('csga_session');
    renderLoggedOut();
    renderMcpGrid();
    updateStats();
  };

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  RENDER â€” Auth State
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function renderLoggedIn() {
    const initial = state.email ? state.email[0].toUpperCase() : '?';
    $('authBar').innerHTML = `
      <div class="user-avatar">${initial}</div>
      <span style="font-weight:600;">${state.email}</span>
      <button onclick="doLogout()" class="btn-dash btn-billing" style="padding:8px 20px;font-size:0.85rem;">Sign Out</button>
    `;
    updateSubscriptionCard();
    updateStats();
  }

  function renderLoggedOut() {
    $('authBar').innerHTML = `
      <button onclick="showLogin()" class="btn-dash btn-upgrade">Sign In</button>
      <a href="/members.html" class="btn-dash btn-billing">Create Account</a>
    `;
    // Reset to community defaults
    state.tier = 'community';
    updateSubscriptionCard();
    updateStats();
    updateUsageDisplay(null);
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  SUBSCRIPTION CARD
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function updateSubscriptionCard() {
    const tierKey = state.tier;
    // Map tier key to CSGA_PRICING membership key
    const memberMap = {
      community: 'community', starter: 'starter', professional: 'professional',
      enterprise_sector: 'enterpriseSector', enterprise_full: 'enterpriseFull',
      enterprise_custom: 'enterpriseCustom',
    };
    const membership = CSGA_PRICING.memberships[memberMap[tierKey] || 'community'];
    if (!membership) return;

    const colors = tierBadgeColors[tierKey] || tierBadgeColors.community;
    $('subBadge').style.background = colors.bg;
    $('subBadge').style.color = colors.text;
    $('subBadge').textContent = membership.name.toUpperCase();
    $('subPlanName').textContent = membership.name;

    // Description
    const mcpLabel = membership.mcpCount === -1 ? 'All' : membership.mcpCount;
    const creditLabel = membership.credits === -1 ? 'Unlimited' : membership.credits.toLocaleString();
    $('subPlanDesc').textContent = `${mcpLabel} MCPs, ${creditLabel} credits/month`;

    // Price
    const price = membership.monthlyPrice;
    $('subPriceDisplay').textContent = price === 0 ? 'Free' : price === null ? 'Custom' : `$${price}/mo`;

    // Features (show top 4)
    const feats = (membership.features || []).slice(0, 4);
    $('subFeatures').innerHTML = feats.map(f =>
      `<div style="font-size:0.78rem;color:rgba(255,255,255,0.75);padding:3px 0;">âœ“ ${f}</div>`
    ).join('');

    // Show/hide buttons
    if (tierKey === 'community') {
      $('btnUpgrade').style.display = 'inline-block';
      $('btnUpgrade').textContent = 'Upgrade Plan';
      $('btnBilling').style.display = 'none';
    } else {
      $('btnUpgrade').style.display = 'inline-block';
      $('btnUpgrade').textContent = 'Change Plan';
      $('btnBilling').style.display = state.loggedIn ? 'inline-block' : 'none';
    }

    // Show support link for paid tiers
    $('qaSupport').style.display = tierKey !== 'community' ? 'flex' : 'none';

    // Team card
    if (membership.teamMembers > 1 && state.loggedIn) {
      $('teamCard').style.display = 'block';
      const teamLabel = membership.teamMembers === -1 ? 'Unlimited' : membership.teamMembers;
      $('teamInfo').innerHTML = `
        <div style="font-size:0.9rem;font-weight:600;color:#0A1628;margin-bottom:8px;">
          ${teamLabel} seats included
        </div>
        <div style="font-size:0.82rem;color:#94A3B8;">1 seat used â€¢ ${membership.teamMembers === -1 ? 'âˆ' : membership.teamMembers - 1} remaining</div>
        <div style="margin-top:12px;">
          <a href="/contact.html" style="color:#0058A4;font-weight:600;font-size:0.82rem;text-decoration:none;">Invite team members â†’</a>
        </div>
      `;
    } else {
      $('teamCard').style.display = 'none';
    }
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  STATS ROW
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function updateStats() {
    const memberMap = {
      community: 'community', starter: 'starter', professional: 'professional',
      enterprise_sector: 'enterpriseSector', enterprise_full: 'enterpriseFull',
      enterprise_custom: 'enterpriseCustom',
    };
    const membership = CSGA_PRICING.memberships[memberMap[state.tier] || 'community'];
    if (!membership) return;

    $('statPlan').textContent = membership.name;
    $('statPlanSub').textContent = membership.monthlyPrice === 0 ? 'Free Tier'
      : membership.monthlyPrice === null ? 'Custom Plan'
      : `$${membership.monthlyPrice}/month`;

    const mcpCount = membership.mcpCount === -1 ? '70' : membership.mcpCount;
    $('statMcpCount').textContent = mcpCount;
    $('statMcpSub').textContent = membership.mcpCount === -1 ? 'All servers' : 'Servers available';

    const credits = membership.credits === -1 ? 'âˆ' : membership.credits.toLocaleString();
    $('statCreditsTotal').textContent = membership.credits === -1 ? 'Unlimited' : `of ${credits}`;
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  USAGE â€” Fetch from API
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  async function fetchUsage() {
    if (!state.customerId) return;
    try {
      const res = await fetch(`${CSGA_PRICING.stripe.endpoints.usage}?action=status&customerId=${state.customerId}`);
      if (!res.ok) throw new Error('API error');
      const data = await res.json();
      state.usage = data;
      state.tier = data.tier || state.tier;
      updateUsageDisplay(data);
      updateSubscriptionCard();
      updateStats();
      renderMcpGrid();

      // Trial banner
      if (data.subscription && data.subscription.trialEnd) {
        const trialEnd = new Date(data.subscription.trialEnd * 1000);
        const daysLeft = Math.ceil((trialEnd - Date.now()) / 86400000);
        if (daysLeft > 0 && daysLeft <= 14) {
          $('trialBanner').style.display = 'block';
          $('trialText').textContent = `Your free trial ends in ${daysLeft} day${daysLeft !== 1 ? 's' : ''}.`;
        }
      }

      // Period end
      if (data.period && data.period.end) {
        const endDate = new Date(data.period.end);
        $('statPeriod').textContent = endDate.toLocaleDateString('en-GB', { day: 'numeric', month: 'short' });
        $('statPeriodSub').textContent = 'Billing renews';
      }
    } catch (err) {
      // API not available â€” use demo data
      console.log('Usage API not available, using demo data');
      updateUsageDisplay(null);
    }
  }

  function updateUsageDisplay(data) {
    const memberMap = {
      community: 'community', starter: 'starter', professional: 'professional',
      enterprise_sector: 'enterpriseSector', enterprise_full: 'enterpriseFull',
      enterprise_custom: 'enterpriseCustom',
    };
    const membership = CSGA_PRICING.memberships[memberMap[state.tier] || 'community'];

    let used = 0, total = membership ? membership.credits : 100, overage = 0, overageCostStr = '$0.00';

    if (data && data.usage) {
      used = data.usage.callsUsed || 0;
      total = data.usage.includedCredits === 'unlimited' ? Infinity : (data.usage.totalAvailable || total);
      overage = data.usage.overageCount || 0;
      overageCostStr = data.usage.estimatedOverageCost || '$0.00';
    } else if (state.loggedIn) {
      // Demo data based on tier
      used = state.tier === 'community' ? 42 : state.tier === 'starter' ? 1247 : state.tier === 'professional' ? 4832 : 18400;
    }

    $('statCreditsUsed').textContent = total === Infinity ? used.toLocaleString() : used.toLocaleString();

    if (total === Infinity) {
      $('usageBar').style.width = '15%';
      $('usageBar').style.background = 'linear-gradient(90deg,#A855F7,#7C3AED)';
      $('usageLabelUsed').textContent = used.toLocaleString() + ' used';
      $('usageLabelRemaining').textContent = 'Unlimited';
      $('statCreditsTotal').textContent = 'Unlimited';
    } else {
      const pct = total > 0 ? Math.min((used / total) * 100, 100) : 0;
      $('usageBar').style.width = pct + '%';
      const remaining = Math.max(0, total - used);

      // Color: green < 70%, amber 70-90%, red > 90%
      if (pct >= 90) {
        $('usageBar').style.background = 'linear-gradient(90deg,#EF4444,#DC2626)';
      } else if (pct >= 70) {
        $('usageBar').style.background = 'linear-gradient(90deg,#F59E0B,#D97706)';
      } else {
        $('usageBar').style.background = 'linear-gradient(90deg,#10B981,#059669)';
      }

      $('usageLabelUsed').textContent = used.toLocaleString() + ' used';
      $('usageLabelRemaining').textContent = remaining.toLocaleString() + ' remaining';
      $('statCreditsTotal').textContent = 'of ' + total.toLocaleString();
    }

    // Overage display
    if (overage > 0) {
      $('overageInfo').style.display = 'block';
      $('overageCount').textContent = overage.toLocaleString();
      $('overageCost').textContent = overageCostStr;
      $('overageRate').textContent = membership && membership.overageRate
        ? '$' + (membership.overageRate * 1000).toFixed(0) + '/1K'
        : '$0';
      $('overageAlert').style.display = 'block';
      $('overageText').textContent = `You've used ${overage.toLocaleString()} calls over your included credits.`;
    } else {
      $('overageInfo').style.display = 'none';
      $('overageAlert').style.display = 'none';
    }
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  MCP GRID â€” from CSGA_PRICING.mcpCatalog
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function renderMcpGrid() {
    const grid = $('mcpGrid');
    grid.innerHTML = '';
    const catalog = CSGA_PRICING.mcpCatalog;
    const entries = Object.entries(catalog);

    // Determine which MCPs user has access to
    const memberMap = {
      community: 'community', starter: 'starter', professional: 'professional',
      enterprise_sector: 'enterpriseSector', enterprise_full: 'enterpriseFull',
      enterprise_custom: 'enterpriseCustom',
    };
    const membership = CSGA_PRICING.memberships[memberMap[state.tier] || 'community'];
    const maxMcps = membership ? (membership.mcpCount === -1 ? 999 : membership.mcpCount) : 3;

    // Sort: core first, then by sector, then devtools
    const sectorOrder = { core: 0, t1: 1, t2: 2, t3: 3, t4: 4, devtools: 5 };
    entries.sort((a, b) => (sectorOrder[a[1].sector] || 9) - (sectorOrder[b[1].sector] || 9));

    let accessCount = 0;
    entries.forEach(([slug, mcp]) => {
      const cls = classColors[mcp.class] || classColors.lvp;
      const hasAccess = accessCount < maxMcps || state.tier.startsWith('enterprise');
      if (hasAccess) accessCount++;

      const el = document.createElement('div');
      el.className = 'mcp-item';
      if (!hasAccess) el.style.opacity = '0.5';
      el.innerHTML = `
        <div style="display:flex;align-items:center;gap:8px;min-width:0;">
          <div class="mcp-dot" style="background:${hasAccess ? '#10B981' : '#94A3B8'};"></div>
          <span class="mcp-name">${mcp.name}</span>
        </div>
        <span class="mcp-badge" style="color:${cls.text};background:${cls.bg};">${cls.label}</span>
      `;
      grid.appendChild(el);
    });

    // Status badge
    const badge = $('mcpStatusBadge');
    badge.textContent = `${accessCount} Active`;
    badge.style.color = '#10B981';
    badge.style.background = 'rgba(16,185,129,0.1)';
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  BILLING PORTAL
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  window.openBillingPortal = async function() {
    if (!state.customerId) {
      showToast('Please sign in to manage billing.');
      return;
    }
    try {
      const res = await fetch(CSGA_PRICING.stripe.endpoints.portal, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          customerId: state.customerId,
          returnUrl: window.location.origin + '/dashboard',
        }),
      });
      const data = await res.json();
      if (data.url) {
        window.location.href = data.url;
      } else {
        showToast('Unable to open billing portal. Please try again.');
      }
    } catch (err) {
      showToast('Billing portal unavailable. Please contact support.');
      console.error('Portal error:', err);
    }
  };

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  CREDIT PACKS â€” Buy via Stripe
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  window.buyCredits = async function(pack) {
    const packData = CSGA_PRICING.creditPacks[pack];
    if (!packData || !packData.stripePrice) {
      showToast(`Credit pack: ${packData ? packData.credits.toLocaleString() : '?'} credits for $${packData ? packData.price : '?'}`);
      return;
    }
    try {
      await csga_checkout(packData.stripePrice, {
        mode: 'payment',
        metadata: {
          productType: 'credit_pack',
          pack: pack,
          credits: packData.credits,
        },
      });
    } catch (err) {
      showToast('Unable to start checkout. Please try again.');
    }
  };

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  TOAST NOTIFICATION
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function showToast(msg) {
    const t = $('toast');
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 4000);
  }

  // â”€â”€ Login modal backdrop click â”€â”€
  $('loginModal').addEventListener('click', function(e) {
    if (e.target === this) closeLogin();
  });

  // â”€â”€ Init â”€â”€
  init();

})();
</script>

<!-- Responsive -->
<style>
@media(max-width:900px){
 #dashContent > div{grid-template-columns:1fr !important;}
}
</style>

<script>
// Smart upsell logic based on tier
(function() {
 function showUpsell() {
  var session = JSON.parse(localStorage.getItem('csga_session') || '{}');
  var tier = (session.tier || 'community').toLowerCase();
  var card = document.getElementById('upsellCard');
  if (!card) return;

  if (tier === 'community') {
   card.style.display = 'block';
   document.getElementById('upsellTitle').textContent = 'ğŸš€ Unlock 44 More MCPs';
   document.getElementById('upsellDesc').textContent = "You're on Community (3 MCPs, 100 credits). Starter gives you 5 MCPs + 2,500 credits â€” with a 14-day free trial.";
   document.getElementById('upsellOldPrice').textContent = '$0/mo';
   document.getElementById('upsellNewPrice').textContent = 'â†’ $79/mo';
   document.getElementById('upsellBtn').textContent = 'Try Starter Free for 14 Days â†’';
  } else if (tier === 'starter') {
   card.style.display = 'block';
   document.getElementById('upsellTitle').textContent = 'ğŸ“ˆ Ready to Scale?';
   document.getElementById('upsellDesc').textContent = "Professional gives you 12 MCPs + 10,000 credits + priority support. 73% of growing teams choose Professional.";
   document.getElementById('upsellOldPrice').textContent = '$79/mo';
   document.getElementById('upsellNewPrice').textContent = 'â†’ $199/mo';
   document.getElementById('upsellBtn').textContent = 'Upgrade to Professional â†’';
  }
 }

 // Run after dashboard loads
 setTimeout(showUpsell, 500);
 window.addEventListener('csga-session-loaded', showUpsell);
})();
</script>

<script>
function copyReferralLink() {
 var session = JSON.parse(localStorage.getItem('csga_session') || '{}');
 var ref = btoa((session.email || 'guest') + ':' + Date.now()).slice(0,12);
 var link = 'https://csga-global.vercel.app/pricing.html?ref=' + ref;
 navigator.clipboard.writeText(link).then(function() {
  document.getElementById('referralCopied').style.display = 'block';
  setTimeout(function() { document.getElementById('referralCopied').style.display = 'none'; }, 3000);
 });
}
</script>

<div id="site-footer"></div>
<script src="./components/shared.js"></script>
</body>
</html>